---
layout: post
title: "The research on pedometer algorithm"
description: ""
category: nRF51822 development
tags: []
---
{% include JB/setup %}

最近在开发一款手环，其必不可少的功能必然是计步。计步可能是手环中最基本但又很重要的一个功能，对于涉行未深的我来说还是有点小难度的，好在通过不断的查阅资料，采样波形总结，设计出了一个粗劣的计步算法。
由于手环在佩戴的时候位置并不固定，而且行走中抖动特别大，只通过一个三轴加速度计不太可能或者容易判断出人的运动轨迹。然而通过采样生成的曲线图，我们发现，当对其当前的各个轴加速度值求模之后，即modular = sqrt(x^2+y^2+z^2),模的采样值形成的曲线大体为一条类似正弦波，而且每隔一段时间有一个最大波谷（波峰），波谷数（波峰数）同步伐数相等。现在问题就很明朗了，我们只要数波谷（这里我选择的波谷）的个数即可求得所走的步伐数。
当然了，我们必须对条件的成立设置一些限定，否则会出现很大的判断失误。<未完，待续。。。>
